<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ilayda ‚ù§Ô∏è</title>

<style>
  body{
    margin:0;
    font-family: Arial, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    background: linear-gradient(135deg,#f8cdda,#e1d5ff);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    overflow:hidden;
  }

  .card{
    background:white;
    padding:46px 32px;
    border-radius:26px;
    text-align:center;
    width:90%;
    max-width:420px;
    box-shadow:0 10px 40px rgba(0,0,0,0.10);
    position:relative;
    z-index:5;
  }

  #title{
    margin:0 0 18px;
    font-size:34px;
  }

  #question{
    font-size:24px;
    font-weight:800;
    line-height:1.35;
    margin:0 0 28px;
  }

  /* AREA: Buttons leben NUR hier drin */
  #buttonsArea{
    position:relative;
    height:170px;
    width:100%;
  }

  .btn{
    border:none;
    padding:16px 34px;
    font-size:18px;
    border-radius:40px;
    cursor:pointer;
    user-select:none;
    -webkit-tap-highlight-color: transparent;
    white-space: nowrap;
    position:absolute;
    transition: transform .18s ease, background .18s ease, opacity .2s ease;
  }

  #yes{
    background:#ff2f74;
    color:white;
    left:22%;
    top:50%;
    transform: translateY(-50%) scale(1);
    z-index:2;
  }

  #nein{
    background:#111;
    color:white;
    left:62%;
    top:50%;
    transform: translateY(-50%) scale(1.08);
    z-index:3; /* immer √ºber JA sichtbar */
  }

  /* Meme */
  #memePic{
    position:fixed;
    bottom:0;
    left:50%;
    transform:translateX(-50%) scale(0);
    opacity:0;
    transition: transform .35s ease, opacity .35s ease;
    z-index:9998;
    pointer-events:none;
    max-height:65vh;
  }

  /* Ergebnis */
  #result{
    display:none;
    margin-top:18px;
    font-weight:900;
    line-height:1.15;
  }
  #result.show{
    display:block;
    animation: popIn .28s ease both;
  }
  @keyframes popIn{
    from{ transform: translateY(8px) scale(.98); opacity:0; }
    to{ transform: translateY(0) scale(1); opacity:1; }
  }
  .yess{ font-size:28px; margin-bottom:12px; }
  .place{ font-size:30px; }

  /* Konfetti */
  .confetti{
    position:fixed;
    width:10px;
    height:10px;
    top:-10px;
    animation: fall 3s linear infinite;
    pointer-events:none;
    z-index:1;
  }
  @keyframes fall{
    to{ transform: translateY(110vh) rotate(720deg); }
  }

  /* Herzen */
  .heart{
    position: fixed;
    top: 105vh;
    pointer-events: none;
    z-index: 2;
    animation: floatUp 3.2s ease forwards;
    opacity: 0;
  }
  @keyframes floatUp{
    0%   { transform: translateY(0) scale(1); opacity: 0; }
    12%  { opacity: 1; }
    100% { transform: translateY(-120vh) scale(1.25); opacity: 0; }
  }

  /* riesiges JA (aus Nein) */
  .hugeYes{
    left:50% !important;
    top:58% !important;
    transform: translate(-50%,-50%) scale(3) !important;
    background:#ff2f74 !important;
    color:#fff !important;
    z-index:99999 !important;
    animation: hugePop .45s ease both;
  }
  @keyframes hugePop{
    0%   { transform: translate(-50%,-50%) scale(1); }
    60%  { transform: translate(-50%,-50%) scale(3.4); }
    100% { transform: translate(-50%,-50%) scale(3.0); }
  }
</style>
</head>

<body>

<img id="memePic" src="https://i.imgur.com/AexB9oC.jpeg" alt="meme">

<div class="card">
  <h1 id="title">Ilayda ‚ù§Ô∏è</h1>
  <div id="question">Willst du mein Valentinstags-Date sein? ‚ù§Ô∏è</div>

  <div id="buttonsArea">
    <button id="yes" class="btn">Ja üòç</button>
    <button id="nein" class="btn">Nein üôÉ</button>
  </div>

  <div id="result"></div>
</div>

<script>
const yesBtn   = document.getElementById("yes");
const neinBtn  = document.getElementById("nein");
const titleEl  = document.getElementById("title");
const qEl      = document.getElementById("question");
const areaEl   = document.getElementById("buttonsArea");
const resultEl = document.getElementById("result");
const memeEl   = document.getElementById("memePic");

let clicks = 0;
let yesScale = 1;
let memeShown = false;
let turnedHuge = false;

const neinTexts = [
  "√úberleg nochmal üòå",
  "Ich bring auch Snacks üòè",
  "Bist du dir wirklich sicher?"
];

function showMeme2s(){
  memeEl.style.opacity = "1";
  memeEl.style.transform = "translateX(-50%) scale(0.65)";
  setTimeout(()=>{
    memeEl.style.opacity = "0";
    memeEl.style.transform = "translateX(-50%) scale(0)";
  }, 2000);
}

function rectInArea(el){
  const r = el.getBoundingClientRect();
  const a = areaEl.getBoundingClientRect();
  return {
    x: r.left - a.left,
    y: r.top - a.top,
    w: r.width,
    h: r.height,
    cx: (r.left - a.left) + r.width/2,
    cy: (r.top  - a.top ) + r.height/2
  };
}

function placeNeinNoOverlap(){
  // Grenzen innerhalb der Area
  const a = areaEl.getBoundingClientRect();
  const b = neinBtn.getBoundingClientRect();

  const minX = 10;
  const minY = 10;
  const maxX = Math.max(10, a.width  - b.width  - 10);
  const maxY = Math.max(10, a.height - b.height - 10);

  // Sicherheitsabstand zu YES
  const yesR = rectInArea(yesBtn);
  const safe = Math.max(yesR.w, yesR.h) / 2 + Math.max(b.width, b.height)/2 + 24;

  let best = null;

  for(let i=0;i<40;i++){
    const x = minX + Math.random() * (maxX - minX);
    const y = minY + Math.random() * (maxY - minY);

    const cx = x + b.width/2;
    const cy = y + b.height/2;

    const dist = Math.hypot(cx - yesR.cx, cy - yesR.cy);

    if(dist >= safe){
      best = {x,y};
      break;
    }
    if(!best || dist > best.dist) best = {x,y,dist};
  }

  neinBtn.style.left = best.x + "px";
  neinBtn.style.top  = best.y + "px";
  neinBtn.style.transform = "scale(1.08)";

  neinBtn.animate(
    [{ transform:"scale(1.08)" }, { transform:"scale(1.16)" }, { transform:"scale(1.08)" }],
    { duration: 170, easing: "ease-out" }
  );
}

function launchConfetti(){
  for(let i=0;i<80;i++){
    const c = document.createElement("div");
    c.className = "confetti";
    c.style.left = Math.random()*100 + "vw";
    c.style.background = `hsl(${Math.random()*360},100%,50%)`;
    c.style.animationDuration = (Math.random()*2+2)+"s";
    document.body.appendChild(c);
  }
}

function launchHearts(){
  for(let i=0;i<18;i++){
    const h = document.createElement("div");
    h.className = "heart";
    h.textContent = "‚ù§Ô∏è";
    h.style.left = (Math.random()*100) + "vw";
    h.style.fontSize = (18 + Math.random()*18) + "px";
    h.style.animationDuration = (2.6 + Math.random()*1.2) + "s";
    h.style.animationDelay = (Math.random()*0.6) + "s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 4500);
  }
}

function showFinal(){
  titleEl.style.display = "none";
  qEl.style.display = "none";
  areaEl.style.display = "none";
  memeEl.style.display = "none";

  resultEl.classList.add("show");
  resultEl.innerHTML = `
    <div class="yess">YESSSS ü•≥</div>
    <div class="place">Samstag 15 Uhr ¬∑ Eichendorffring</div>
  `;

  launchConfetti();
  launchHearts();
}

yesBtn.addEventListener("click", showFinal);

neinBtn.addEventListener("click", () => {
  if(turnedHuge) return;

  clicks++;

  if(clicks === 1) neinBtn.textContent = neinTexts[0];
  if(clicks === 2) neinBtn.textContent = neinTexts[1];
  if(clicks === 3) neinBtn.textContent = neinTexts[2];

  if(clicks === 4 && !memeShown){
    memeShown = true;
    showMeme2s();
  }

  if(clicks === 5){
    turnedHuge = true;

    // am Ende darf nur noch das aus "Nein" gewordene JA existieren
    yesBtn.style.display = "none";

    neinBtn.textContent = "Ja üíò";
    neinBtn.classList.add("hugeYes");
    neinBtn.onclick = showFinal;
    return;
  }

  // springt ohne √úberlappung
  // (wichtig: erst springen, dann wachsen ‚Äì so stimmen die Ma√üe)
  placeNeinNoOverlap();

  yesScale += 0.20;
  yesBtn.style.transform = `translateY(-50%) scale(${yesScale.toFixed(2)})`;
});
</script>

</body>
</html>