<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ilayda ‚ù§Ô∏è</title>

<style>
  body{
    margin:0;
    font-family: Arial, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    background: linear-gradient(135deg,#f8cdda,#e1d5ff);
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
  }

  .card{
    width:90%;
    max-width:420px;
    background:#fff;
    border-radius:26px;
    padding:46px 22px 40px;
    text-align:center;
    box-shadow:0 18px 50px rgba(0,0,0,.12);
    position:relative;
    z-index:5;
  }

  #title{
    margin:0 0 18px;
    font-size:34px;
    font-weight:900;
  }

  #question{
    font-size:24px;
    font-weight:900;
    line-height:1.25;
    margin:0 0 34px;
  }

  #buttonsArea{
    height:130px;
    display:flex;
    justify-content:center;
    align-items:center;
    gap:60px;
    position:relative;
  }

  button{
    border:none;
    border-radius:999px;
    padding:16px 36px;
    font-size:18px;
    cursor:pointer;
    transition: transform .2s ease;
    -webkit-tap-highlight-color: transparent;
    user-select:none;
    white-space:nowrap;
  }

  #yes{
    background:#ff2f75;
    color:#fff;
  }

  #nein{
    background:#111;
    color:#fff;
    padding:18px 40px;
  }

  #meme{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) scale(.85);
    opacity:0;
    width:280px;
    max-width:80vw;
    transition: opacity .25s ease, transform .25s ease;
    z-index:9999;
    pointer-events:none;
    filter: drop-shadow(0 18px 40px rgba(0,0,0,.28));
    border-radius:14px;
  }

  #result{
    display:none;
    margin-top:18px;
    font-size:30px;
    font-weight:900;
    line-height:1.2;
  }
  #result.show{
    display:block;
    animation: pop .35s ease both;
  }
  @keyframes pop{
    from{ transform: translateY(8px) scale(.98); opacity:0; }
    to{ transform: translateY(0) scale(1); opacity:1; }
  }

  .confetti{
    position:fixed;
    top:-20px;
    width:10px;
    height:14px;
    border-radius:3px;
    opacity:.95;
    pointer-events:none;
    z-index:2000;
    animation: confettiFall var(--dur) ease-in forwards;
    transform: translateX(var(--x0)) rotate(0deg);
  }
  @keyframes confettiFall{
    0%   { transform: translateX(var(--x0)) translateY(-20px) rotate(0deg); opacity:0; }
    12%  { opacity:1; }
    100% { transform: translateX(var(--x1)) translateY(120vh) rotate(540deg); opacity:1; }
  }

  .heart{
    position:fixed;
    top:105vh;
    pointer-events:none;
    z-index:2001;
    opacity:0;
    animation: heartFloat var(--hdur) ease-out forwards;
    transform: translateX(var(--hx)) translateY(0) scale(var(--hs));
  }
  @keyframes heartFloat{
    0%   { opacity:0; transform: translateX(var(--hx)) translateY(0) scale(var(--hs)); }
    15%  { opacity:1; }
    100% { opacity:0; transform: translateX(var(--hx2)) translateY(-120vh) scale(calc(var(--hs) + 0.25)); }
  }
</style>
</head>

<body>

<img id="meme" src="https://i.imgur.com/AexB9oC.jpeg" alt="meme">

<div class="card">
  <h1 id="title">Ilayda ‚ù§Ô∏è</h1>
  <div id="question">Willst du mein Valentinstags-Date sein? ‚ù§Ô∏è</div>

  <div id="buttonsArea">
    <button id="yes">Ja üòç</button>
    <button id="nein">Nein üòì</button>
  </div>

  <div id="result"></div>
</div>

<script>
  const yes = document.getElementById("yes");
  const nein = document.getElementById("nein");
  const meme = document.getElementById("meme");
  const title = document.getElementById("title");
  const question = document.getElementById("question");
  const buttonsArea = document.getElementById("buttonsArea");
  const result = document.getElementById("result");

  let clicks = 0;
  let floating = false;
  let memeShown = false;
  let bigMode = false;

  let confettiTimer = null;
  let heartsTimer = null;

  let neinSpacer = null;         // h√§lt Platz im Flex -> Ja bewegt sich nicht
  const padX = 10;

  const texts = [
    "√úberleg nochmalü§î",
    "Ich bring auch Snacksüòâ",
    "Letzte Chanceüòï"
  ];

  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  // ‚úÖ FIX 1: nach jeder Breiten√§nderung X neu clampen, damit nichts abgeschnitten wird
  function clampNeinXInScreen(){
    if(!floating || bigMode) return;

    const r = nein.getBoundingClientRect();
    const curLeft = parseFloat(nein.style.left || r.left);
    const maxLeft = window.innerWidth - r.width - padX;
    const newLeft = clamp(curLeft, padX, maxLeft);
    nein.style.left = newLeft + "px";
  }

  function makeNeinFloating(){
    if (floating) return;
    floating = true;

    const r = nein.getBoundingClientRect();

    // Spacer rein -> Ja bleibt exakt stehen
    neinSpacer = document.createElement("div");
    neinSpacer.style.width = r.width + "px";
    neinSpacer.style.height = r.height + "px";
    neinSpacer.style.flex = "0 0 auto";
    buttonsArea.replaceChild(neinSpacer, nein);

    // Nein an body h√§ngen
    document.body.appendChild(nein);
    nein.style.position = "fixed";
    nein.style.margin = "0";
    nein.style.zIndex = "9000";
    nein.style.transition = "top 0.75s ease-in-out, transform 0.2s ease, background 0.2s ease";

    // initial X clamp (basierend auf aktueller Breite)
    const maxLeft = window.innerWidth - r.width - padX;
    const left = clamp(r.left, padX, maxLeft);
    nein.style.left = left + "px";

    // Y bleibt
    nein.style.top = r.top + "px";
  }

  function moveNeinVerticalExtreme(){
    const padY = 10;
    const maxY = window.innerHeight - nein.offsetHeight - padY;
    const y = padY + Math.random() * Math.max(10, (maxY - padY));
    nein.style.top = y + "px";
  }

  function showMeme2s(){
    meme.style.opacity = "1";
    meme.style.transform = "translate(-50%,-50%) scale(1)";
    setTimeout(()=>{
      meme.style.opacity = "0";
      meme.style.transform = "translate(-50%,-50%) scale(.85)";
    }, 2000);
  }

  function turnNeinIntoBigYesInButtonsZone(){
    bigMode = true;

    // Ja bleibt stehen (Platz bleibt), aber unsichtbar & nicht klickbar
    yes.style.visibility = "hidden";
    yes.style.pointerEvents = "none";

    // gro√ü in die Button-Zone (nicht auf die Frage)
    const a = buttonsArea.getBoundingClientRect();

    nein.textContent = "Ja üñïüèº";
    nein.style.background = "#ff2f75";
    nein.style.color = "#fff";

    nein.style.left = (a.left + a.width/2) + "px";
    nein.style.top  = (a.top  + a.height/2) + "px";
    nein.style.transform = "translate(-50%,-50%) scale(2.8)";
    nein.style.zIndex = "10000";

    nein.onclick = finalYes;
  }

  function finalYes(){
    // ‚úÖ FIX 2: floating Nein (und big Ja) wirklich weg
    nein.style.display = "none";

    title.style.display = "none";
    question.style.display = "none";
    buttonsArea.style.display = "none";
    meme.style.opacity = "0";

    result.classList.add("show");
    result.style.display = "block";
    result.innerHTML = "YEEEAAHHH ü•≥<br><br>Samstag 15 Uhr ¬∑ Eichendorffring";

    startConfettiForeverDense();
    startHeartsNice();
  }

  nein.addEventListener("click", () => {
    if (bigMode) return;

    clicks++;
    makeNeinFloating();

    if (clicks <= 3){
      nein.textContent = texts[clicks - 1];

      // nach Textwechsel wird er breiter -> clamp
      clampNeinXInScreen();

      moveNeinVerticalExtreme();
      return;
    }

    if (clicks === 4 && !memeShown){
      memeShown = true;
      showMeme2s();

      // nach Textwechsel clamp (falls er noch breit ist)
      clampNeinXInScreen();

      moveNeinVerticalExtreme();
      return;
    }

    if (clicks === 5){
      turnNeinIntoBigYesInButtonsZone();
    }
  });

  yes.addEventListener("click", finalYes);

  function startConfettiForeverDense(){
    if (confettiTimer) return;

    function createConfetti(){
      const c = document.createElement("div");
      c.className = "confetti";
      c.style.left = (Math.random()*100) + "vw";
      c.style.background = `hsl(${Math.random()*360},100%,55%)`;

      const dur = 5.8 + Math.random()*2.4;
      c.style.setProperty("--dur", dur + "s");
      c.style.setProperty("--x0", (Math.random()*40 - 20) + "px");
      c.style.setProperty("--x1", (Math.random()*160 - 80) + "px");

      document.body.appendChild(c);
      setTimeout(()=>c.remove(), (dur*1000) + 300);
    }

    confettiTimer = setInterval(createConfetti, 60);
  }

  function startHeartsNice(){
    if (heartsTimer) return;

    const start = Date.now();
    heartsTimer = setInterval(() => {
      if (Date.now() - start > 15000){
        clearInterval(heartsTimer);
        heartsTimer = null;
        return;
      }

      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = "‚ù§Ô∏è";
      h.style.left = (Math.random()*100) + "vw";

      const hdur = 5.5 + Math.random()*2.5;
      h.style.setProperty("--hdur", hdur + "s");
      h.style.setProperty("--hx", (Math.random()*20 - 10) + "px");
      h.style.setProperty("--hx2", (Math.random()*80 - 40) + "px");
      h.style.setProperty("--hs", (0.9 + Math.random()*0.6).toFixed(2));
      h.style.fontSize = (18 + Math.random()*18) + "px";

      document.body.appendChild(h);
      setTimeout(()=>h.remove(), (hdur*1000) + 400);
    }, 240);
  }

  // Bei Resize: immer wieder clampen
  window.addEventListener("resize", () => {
    clampNeinXInScreen();
  });
</script>

</body>
</html>